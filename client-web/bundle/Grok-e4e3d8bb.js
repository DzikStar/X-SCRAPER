"use strict";
(self.webpackChunk_twitter_responsive_web = self.webpackChunk_twitter_responsive_web || []).push([
    ["bundle.Grok-e4e3d8bb"],
    {
        839090: (e, a, d) => {
            d.d(a, { Z: () => r });
            d(202784);
            const r = (0, d(523561).Z)({
                loader: () =>
                    Promise.all([
                        d.e("icons.5"),
                        d.e("icons.6"),
                        d.e("icons.22"),
                        d.e("icons.25"),
                        d.e("icons.9"),
                        d.e("icons.4"),
                        d.e("icons.15"),
                        d.e("icons.20"),
                        d.e("icons.7"),
                        d.e("icons.0"),
                        d.e("modules.common-e907d115"),
                        d.e("modules.common-e019dbda"),
                        d.e("icons.11"),
                        d.e("icons.27"),
                        d.e("icons.17"),
                        d.e("icons.12"),
                        d.e("icons.3"),
                        d.e("icons.13"),
                        d.e("icons.24"),
                        d.e("icons.26"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-676e3eb1"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ae204d10"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-f0be4555"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-a8f633cf"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-3357bcf2"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-64ffe41f"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-4514ff28"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-58d4ab8e"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-84815b2f"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-b600c04d"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-760bf32a"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c85e798b"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-63e1b11c"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7ec4485e"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-0157ee89"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-78c7e6e6"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7796c48c"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-647e57f3"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c977f3f0"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-bde9e8ed"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-de203a7b"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-78eb13f6"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-83ae13c2"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),
                        d.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),
                        d.e("shared~loader.Typeahead~loader.AppModules~loader.DMDrawer~ondemand.HoverCard~ondemand.NotFound~bundle.AboutTh"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-50148475"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-2f4a3d25"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-909816ba"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-604de716"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-1299e360"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-60e08fbd"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-25704d22"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-7b94920a"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-a7573e1a"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-ee9ffade"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-8d854c2e"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-aaf38a28"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-aeee0c9e"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-2652b27c"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-da0e99d8"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-3931c1f3"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-c377d397"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-e4b9a405"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-f17e8d44"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-f39972b2"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-568e95f0"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-1895c9ee"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-8fe22a9e"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-0a8205ef"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-5719ea67"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-1b6af858"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-1d6161e2"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-8c7141d9"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-87641eae"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-f33a9093"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-b336079b"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-1f6ca6be"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-b2a4a903"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-2569c2fe"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-0ad0de7e"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-abb249de"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-6cde809e"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-708dfafd"),
                        d.e("shared~bundle.AudioSpaceDetail~bundle.AudioSpaceDiscovery~bundle.AudioSpacebarScreen~bundle.Birdwatc-af3d50e9"),
                        d.e("shared~loader.DMDrawer~bundle.ReaderMode~bundle.Articles~bundle.AudioSpacePeek~bundle.Birdwatch~bundle.Brande"),
                        d.e("shared~loader.Typeahead~loader.DMDrawer~ondemand.HoverCard~bundle.ReaderMode~bundle.AudioSpacePeek~bundle.Bir"),
                        d.e("loader.WideLayout-6107ac1a"),
                        d.e("loader.WideLayout-9f4db315"),
                    ]).then(d.bind(d, 616753)),
            });
        },
        128225: (e, a, d) => {
            d.d(a, { f: () => r });
            d(543673), d(240753), d(128399), d(571372);
            const r = (e, a = !1, d = !1) =>
                new Promise((r, o) => {
                    const n = new URL(e);
                    d && !e.startsWith("blob:") && n.searchParams.set("grok_timestamp", Date.now().toString());
                    const t = new window.XMLHttpRequest();
                    (t.responseType = "blob"),
                        (t.onreadystatechange = () => {
                            t.readyState === window.XMLHttpRequest.DONE && (200 === t.status ? r(t.response) : o(new Error("Unexpected status code")));
                        }),
                        (t.withCredentials = a),
                        (t.onerror = (e) => o(e)),
                        (t.ontimeout = (e) => o(e)),
                        t.open("GET", n.toString(), !0),
                        t.send();
                });
        },
        646403: (e, a, d) => {
            d.d(a, { E: () => o });
            var r = d(420182);
            const o = ({ analytics: e, jotaiStore: a, query: d, responseAtom: o }) => {
                const n = a.get(r.dd);
                let t = "";
                return (
                    n.fetchClient
                        .dispatch("/2/grok/search.json", { method: "POST", credentials: "include", body: JSON.stringify({ query: d }) })
                        .then(async (e) => {
                            if (!e.ok) return void a.set(o, (e) => ({ ...e, status: "error" }));
                            const d = e.body?.getReader();
                            if (!d) return void a.set(o, (e) => ({ ...e, status: "error" }));
                            const r = new TextDecoder();
                            let n = "";
                            return (async function e({ done: i, value: s }) {
                                const l = a.get(o);
                                if (i) t ? a.set(o, (e) => ({ ...e, status: "completed" })) : a.set(o, (e) => ({ ...e, status: "error" }));
                                else if (s) {
                                    const i = r.decode(s);
                                    if (((n += i), n.includes("\n"))) {
                                        const e = n.split("\n");
                                        n = e.pop();
                                        for (const d of e)
                                            try {
                                                const e = JSON.parse(d);
                                                "error" === e.result?.responseType && a.set(o, { ...l, status: "error" }), e.result?.event?.universalSearch?.decision && a.set(o, (e) => ({ ...e, status: "streaming" }));
                                                const r = e.result?.event?.universalSearch?.id;
                                                r && a.set(o, (e) => ({ ...e, universalSearchId: r }));
                                                const n = e.result?.citedWebResults;
                                                n && n.length > 0 && a.set(o, (e) => ({ ...e, citedWebResults: n }));
                                                const i = e.result?.followUpSuggestions;
                                                i && a.set(o, (e) => ({ ...e, followUpSuggestions: i })), e.result?.message && !e.result?.postIds && (t += e.result?.message);
                                                const s = e.result?.imageAttachment;
                                                s && a.set(o, (e) => ({ ...e, fileAttachments: [...e.fileAttachments, { fileName: s.fileName, mimeType: s.mimeType, url: s.imageUrl, mediaId: s.mediaIdStr }] }));
                                            } catch (e) {}
                                    }
                                    if ((a.set(o, (e) => ({ ...e, text: t })), d)) {
                                        return e(await d.read());
                                    }
                                }
                            })(await d.read());
                        })
                        .catch((e) => {
                            a.set(o, (a) => ({ ...a, status: "completed", error: e.toString() }));
                        }),
                    o
                );
            };
        },
        309401: (e, a, d) => {
            d.d(a, { T: () => b, Z: () => c });
            d(136728), d(875640);
            var r = d(565058),
                o = d(323265),
                n = d(791005),
                t = d.n(n),
                i = d(420182),
                s = d(155918),
                l = d(623494),
                u = d(774717);
            class c {
                constructor() {
                    (this.prompt = (0, r.cn)("")), (this.status = (0, r.cn)("idle")), (this.message = (0, r.cn)("")), (this.fileAttachments = (0, r.cn)([])), (this.upsell = (0, r.cn)(null));
                }
            }
            class b extends c {
                constructor(e) {
                    super(), (this.abortController = new AbortController()), (this.imageGenerationCount = 1), (this.conversationId = ""), (this.promptSource = "NATURAL"), (this._store = e);
                }
                abort() {
                    this.abortController.abort();
                }
                updateUpsell(e) {
                    this._store.set(this.upsell, e);
                }
                clearAttachments() {
                    this._store.set(this.fileAttachments, []);
                }
                updatePrompt(e) {
                    this._store.set(this.prompt, e);
                }
                updateMessage(e) {
                    this._store.set(this.message, e);
                }
                updateState(e) {
                    this._store.set(this.status, e);
                }
                addImageAttachmentUpdate(e) {
                    const a = { ...e };
                    this._store.set(this.fileAttachments, (d) => {
                        const r = [...d];
                        let o = !1;
                        for (let d = 0; d < r.length; d++)
                            if ((!r[d].imageId && !r[d].url) || r[d].imageId === e.imageIdStr) {
                                (r[d].imageId = a.imageIdStr), r[d].intermediateResults ? (r[d].intermediateResults = r[d].intermediateResults.concat([a])) : (r[d].intermediateResults = [a]), (o = !0);
                                break;
                            }
                        return o || r.push({ fileName: "image", mimeType: "image/jpeg", url: void 0, imageId: a.imageIdStr, intermediateResults: [a] }), r;
                    });
                }
                addAttachment(e) {
                    this._store.set(this.fileAttachments, (a) => {
                        const d = [...a];
                        let r = !1;
                        for (let a = 0; a < d.length; a++)
                            if ((!d[a].url && !d[a].imageId) || d[a].url === e.url || (e.url && d[a].imageId && e.url.includes(d[a].imageId))) {
                                (d[a] = { ...d[a], url: e.url, fileName: e.fileName, mimeType: e.mimeType }), (r = !0);
                                break;
                            }
                        return r || d.push({ ...e }), d;
                    });
                }
                setAttachmentCount(e) {
                    this._store.set(this.fileAttachments, (a) => {
                        if (a.length === e) return a;
                        const d = [...a];
                        let r = d.length;
                        for (d.length = Math.max(e, d.length); r < e; r++) d[r] = { imageId: "", fileName: "image", mimeType: "image/jpeg", url: void 0 };
                        return d;
                    });
                }
                async generate({ analytics: e, prompt: a }) {
                    (this.abortController = new AbortController()), this._store.set(this.fileAttachments, []);
                    const d = { message: this._store.get(this.prompt) ?? "", sender: s.CI.HUMAN },
                        r = this._store.get(i.dd);
                    if (!("POST_COMPOSER_IMAGE_GEN" === this.promptSource || "POST_COMPOSER_TEXT_GEN" === this.promptSource) && !this.conversationId) {
                        const a = await r.apiClient.graphQL(t(), {});
                        if (((this.conversationId = a.create_grok_conversation?.conversation_id || ""), !this.conversationId)) return void (0, l.Uk)(e, "conversation couln't be found or created");
                    }
                    const n = this.userChatItemId ? "REGENERATE" : "INPUT";
                    let u;
                    (u = "POST_COMPOSER_IMAGE_GEN" === this.promptSource ? { promptSource: "POST_COMPOSER_IMAGE_GEN", action: n } : "POST_COMPOSER_TEXT_GEN" === this.promptSource ? { promptSource: "POST_COMPOSER_TEXT_GEN", action: n } : { promptSource: "NATURAL", action: n }), a && a.toolOverrides && (this.toolOverrides = a.toolOverrides);
                    const c = { responses: [d], conversationId: this.conversationId || void 0, grokModelOptionId: this.model || "", systemPromptName: "", imageGenerationCount: this.imageGenerationCount, promptMetadata: u, resampleResponseId: this.userChatItemId, toolOverrides: this.toolOverrides || {} };
                    (0, l.pv)(e, { conversationLength: 1, isFileAttached: !1 }), this.updateMessage(""), a && a.onStart && a.onStart();
                    const b = this._store.get(i.f0),
                        h = !o.ZP.isTwitterApp() && b.isTrue("responsive_web_grok_api_enable_grok_host");
                    p({ api: r, analytics: e, requestBody: c, atoms: this, eventTag: this.userChatItemId ? "regenerate" : "", enableGrokApiHost: h });
                }
            }
            const p = ({ analytics: e, api: a, atoms: d, enableGrokApiHost: r, eventTag: n, requestBody: t }) => {
                const i = (function () {
                        const e = `grok-${o.ZP.isTwitterApp() ? (o.ZP.isAndroid() ? "android" : "ios") : "web"}:api-handler`,
                            a = u.P_();
                        function d(d) {
                            u.IM(`${e}:${d}`, a.end());
                        }
                        const r = new Set();
                        function n(e) {
                            r.has(e) || (r.add(e), d(e));
                        }
                        return { record: d, recordOnce: n };
                    })(),
                    s = n ? ` (${n})` : "";
                let c = "",
                    b = !1;
                return (
                    d.updateState("loading"),
                    a.fetchClient
                        .dispatch("/2/grok/add_response.json", { method: "POST", credentials: "include", body: JSON.stringify(t), signal: d.abortController?.signal }, r ? "https://grok.x.com" : void 0)
                        .then(async (a) => {
                            if (!a.ok) return i.record(`http-${a.status}`), d.updateState("error"), void (0, l.Uk)(e, `add-response failed with status ${a.status}${s}`);
                            const r = a.body?.getReader();
                            if (!r) return d.updateState("error"), void (0, l.Uk)(e, `reader was not found${s}`);
                            d.updateState("streaming");
                            const o = new TextDecoder();
                            let n = "";
                            const u = setTimeout(() => {
                                    (0, l.eS)(e, !0);
                                }, 5e3),
                                p = await r.read();
                            return (
                                clearTimeout(u),
                                (async function a({ done: u, value: p }) {
                                    if (u) c || b ? (d.updateState("complete"), i.record("time-to-last-chunk")) : (d.updateState("error"), (0, l.Uk)(e, `add-response failed to reach the network${s}`), i.record("network-error"));
                                    else if (p) {
                                        i.recordOnce("time-to-first-chunk");
                                        const s = o.decode(p);
                                        if (((n += s), n.includes("\n"))) {
                                            const a = n.split("\n");
                                            n = a.pop();
                                            for (const r of a)
                                                try {
                                                    const e = JSON.parse(r);
                                                    if ((e.userChatItemId && (d.userChatItemId = e.userChatItemId), e.result?.upsell && d.updateUpsell(e.result.upsell), e.result?.postIds || (e.result?.message && ((c += e.result.message), d.updateMessage(c))), "error" === e.result?.responseType && d.clearAttachments(), e.result?.imageAttachmentCount)) {
                                                        let a = e.result.imageAttachmentCount;
                                                        t.imageGenerationCount && (a = Math.min(a, t.imageGenerationCount)), d.setAttachmentCount(a);
                                                    }
                                                    const a = e.result?.event;
                                                    if ((a && a.imageAttachmentUpdate && ((b = !0), d.addImageAttachmentUpdate({ imageIdStr: a.imageAttachmentUpdate.imageIdStr, imageId: a.imageAttachmentUpdate.imageId, progress: a.imageAttachmentUpdate.progress / 100, imageUrl: a.imageAttachmentUpdate.imageUrl })), "image" === e.result?.responseType || e.result?.imageAttachment?.imageUrl)) {
                                                        b = !0;
                                                        const a = { fileName: "image", mimeType: "image/jpeg", url: e.result.imageAttachment?.imageUrl ?? void 0 };
                                                        d.addAttachment(a);
                                                    }
                                                } catch (a) {
                                                    (0, l.kl)(e, a, { json: r });
                                                }
                                        }
                                        if (r) {
                                            const d = setTimeout(() => {
                                                    (0, l.eS)(e, !1);
                                                }, 5e3),
                                                o = await r.read();
                                            return clearTimeout(d), a(o);
                                        }
                                    }
                                })(p)
                            );
                        })
                        .catch((a) => {
                            a instanceof window.DOMException && "AbortError" === a.name ? i.record("abort") : ((0, l.kl)(e, a), i.record("error")), d.updateState("error");
                        })
                );
            };
        },
        965728: (e, a, d) => {
            d.d(a, { C_: () => S, I5: () => h, K2: () => D, L$: () => l, Rb: () => m, nk: () => p, sI: () => f, xr: () => A });
            var r = d(202784),
                o = d(483677),
                n = d(782578),
                t = d(393058),
                i = d(521514);
            const s = (e, a) => `rgba(${e.rgb.red}, ${e.rgb.green}, ${e.rgb.blue}, ${a})`,
                l = (e) => {
                    const a = e && o.Z.getForGallery(e);
                    return a ? { rgb: A(a), rgba: s(a, 0.9) } : b;
                },
                u = i.Z.columnWidths.primary,
                c = (e, a) => Math.min(a, e),
                b = { rgb: "rgb(0, 0, 0)", rgba: "rgba(0, 0, 0, 0.9)" },
                p = { transitionProperty: "background-color", transitionDuration: ".5s" },
                h = (e, a) => {
                    const { containerHeight: d, containerWidth: r, mediaHeight: o, mediaWidth: t } = e,
                        i = t && o ? t / o : 1,
                        s = i > 1,
                        l = a ? 400 : u,
                        b = s && t <= l ? c(r, l) : r,
                        p = !s && o <= l ? c(d, l) : d;
                    return n.Z.getContainDimensions({ width: b, height: p }, i);
                },
                m = (e) => {
                    const a = e && e.ext_media_color && e.ext_media_color.palette;
                    return l(a);
                },
                D = (e) => {
                    const a = e && e.profile_image_extensions_media_color && e.profile_image_extensions_media_color.palette;
                    return l(a);
                },
                S = (e) => {
                    const a = e && e.profile_banner_extensions_media_color && e.profile_banner_extensions_media_color.palette;
                    return l(a);
                },
                A = (e) => `rgb(${e.rgb.red}, ${e.rgb.green}, ${e.rgb.blue})`,
                g = (e, a) => {
                    switch (a.type) {
                        case "zoom":
                            return { ...e, isZoomed: a.payload?.isZoomed, showControls: !a.payload?.isZoomed };
                        case "tap":
                            return { ...e, showControls: !e.showControls };
                        default:
                            return e;
                    }
                },
                f = () => {
                    const [e, a] = r.useReducer(g, { isZoomed: !1, showControls: !0 });
                    return {
                        hideButtons: e.isZoomed || !e.showControls,
                        handleMediaDetailZoomed: function (e) {
                            a({ type: "zoom", payload: { isZoomed: e } });
                        },
                        handleMediaItemTapped: function () {
                            t.Z.isTouchSupported() && a({ type: "tap" });
                        },
                    };
                };
        },
        584770: (e, a, d) => {
            d.d(a, { Z: () => t });
            var r = d(202784),
                o = d(443781),
                n = d(337394);
            const t = () => {
                const { userClaims: e } = r.useContext(o.rC);
                return !n.cX.some((a) => e.hasSubscription(a)) && (e.hasSubscription("premium_standard") || e.hasSubscription("premium_basic"));
            };
        },
        15334: (e, a, d) => {
            d.d(a, { u: () => n });
            var r = d(202784),
                o = d(443781);
            const n = () => {
                const { userClaims: e } = r.useContext(o.rC);
                return e.hasSubscription("verified_org_full_access") || e.hasSubscription("verified_org_basic") || e.hasSubscription("verified_org_free") || e.hasSubscription("verified_org_gov_paid") || e.hasSubscription("verified_org_gov_paid") || e.hasSubscription("verified_org_legacy") || e.hasSubscription("verified_org_affiliate") || e.hasSubscription("verified_org_gov_affiliate") || e.hasSubscription("premium_plus") ? "premium_plus" : e.hasSubscription("premium_standard") ? "premium_standard" : e.hasSubscription("premium_basic") ? "premium_basic" : "free";
            };
        },
    },
]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Grok-e4e3d8bb.9cb0a9ba.js.map
