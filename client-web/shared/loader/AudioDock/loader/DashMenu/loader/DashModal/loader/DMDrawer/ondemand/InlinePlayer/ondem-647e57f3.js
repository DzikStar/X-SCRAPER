"use strict";
(self.webpackChunk_twitter_responsive_web = self.webpackChunk_twitter_responsive_web || []).push([
    ["shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-647e57f3"],
    {
        247979: (e, A, a) => {
            a.d(A, { Z: () => d });
            var n = a(202784),
                o = a(523561),
                r = a(195560);
            const d = (0, o.Z)({
                loader: () =>
                    Promise.all([
                        a.e("icons.24"),
                        a.e("icons.2"),
                        a.e("icons.10"),
                        a.e("icons.15"),
                        a.e("icons.27"),
                        a.e("icons.12"),
                        a.e("icons.16"),
                        a.e("icons.7"),
                        a.e("icons.29"),
                        a.e("modules.common-e907d115"),
                        a.e("modules.common-e019dbda"),
                        a.e("icons.22"),
                        a.e("icons.19"),
                        a.e("icons.17"),
                        a.e("icons.26"),
                        a.e("modules.audio-6107ac1a"),
                        a.e("modules.audio-b953418a"),
                        a.e("modules.audio-7c51e6a7"),
                        a.e("modules.audio-04db59e9"),
                        a.e("modules.audio-76583d6c"),
                        a.e("modules.audio-b7a8a5fb"),
                        a.e("modules.audio-51f6e793"),
                        a.e("modules.audio-e019dbda"),
                        a.e("modules.audio-262c94d4"),
                        a.e("modules.audio-c6fe4ea4"),
                        a.e("icons.1"),
                        a.e("icons.13"),
                        a.e("icons.21"),
                        a.e("icons.6"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2078c561"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-676e3eb1"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-ae204d10"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-f0be4555"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-a8f633cf"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-3357bcf2"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-9bd28fed"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-4514ff28"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-6a872481"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-58d4ab8e"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-84815b2f"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-b600c04d"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-760bf32a"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c85e798b"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-63e1b11c"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7ec4485e"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-0157ee89"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-78c7e6e6"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7796c48c"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-647e57f3"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-885c42d5"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-7082ec04"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-c977f3f0"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-bde9e8ed"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-78eb13f6"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-83ae13c2"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-db3d5daf"),
                        a.e("shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-2d219c28"),
                        a.e("shared~loader.Typeahead~loader.AppModules~loader.DMDrawer~ondemand.HoverCard~ondemand.NotFound~bundle.AboutTh"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-b2e830dd"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-01ad0730"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-bf625406"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-ab949d70"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-6cce8a9f"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-ff0fc217"),
                        a.e("shared~loader.DashMenu~loader.SideNav~loader.SideNavRedesign~loader.AppModules~loader.DMDrawer~bundl-93606ba8"),
                        a.e("shared~loader.Typeahead~loader.DMDrawer~ondemand.HoverCard~bundle.ReaderMode~bundle.AudioSpacePeek~bundle.Bir"),
                        a.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-8d7085c2"),
                        a.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-53f39e22"),
                        a.e("shared~loader.DMDrawer~bundle.Birdwatch~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompos-167a4ae5"),
                        a.e("shared~loader.DMDrawer~bundle.ReaderMode~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~bundle"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-a25e0877"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-0a1983f3"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-49ce3a1b"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-a9a3eb61"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-0657330d"),
                        a.e("shared~loader.DMDrawer~bundle.Compose~bundle.DirectMessages~bundle.DMRichTextCompose~loader.HWCard~l-76dc24ae"),
                        a.e("loader.HWCard"),
                    ]).then(a.bind(a, 260137)),
                renderPlaceholder: (e, A) => n.createElement(r.Z, { hasError: e, onRetry: A }),
            });
        },
        582129: (e, A, a) => {
            a.d(A, { E3: () => V, HQ: () => U, Hi: () => O, JE: () => ee, Mf: () => W, QJ: () => H, RB: () => ne, Tx: () => z, V$: () => K, VL: () => Ae, _C: () => N, aG: () => ae, dq: () => F, j: () => L, ts: () => J, zr: () => X });
            a(136728), a(571372);
            var n = a(614983),
                o = a.n(n),
                r = a(565058),
                d = a(400752),
                t = a(987809),
                s = a(910626),
                l = a(840590),
                c = a(776342),
                i = a(674132),
                u = a.n(i),
                m = a(239496),
                h = a(420182),
                p = a(42134),
                D = a(545937),
                M = a(484633),
                w = a(381904),
                b = a(610214),
                y = a(390387),
                f = a(601576),
                _ = a(905710),
                g = a(811233),
                S = a(110138),
                v = a(163889),
                I = a(427266),
                C = a(774717),
                E = a(934871),
                k = a(625555),
                B = a(41931),
                R = a(4427),
                Z = a(790997),
                G = a(688327),
                x = a(942428),
                T = a(302217),
                P = a(895229),
                j = a(509599),
                Q = a(261703);
            const N = (0, r.cn)((e) => m.FH.getRegion()),
                H = (0, r.cn)(null, (e, A, a) => {
                    const { addToast: n, conversationControls: o, isSuperFollowersOnly: r, onClose: d, options: t, title: s } = a;
                    return (
                        t.content_type && A(b.HM, t.content_type),
                        e(N)
                            .then((e) => (A(x.WG, e.region), A(Q.D, { broadcastOptions: { ...t, region: e.region }, title: s, conversationControls: o })))
                            .then((e) => (d?.(), L({ contentType: t.content_type, id: e.audioSpaceId, isAnonymous: !1, isLive: !0, isReplay: !1, isSuperFollowersOnly: r, mediaKey: e.mediaKey, role: M.Q.host, clearAndLoadSpace: (e) => A(w.e, e), resetExpandedDockStore: (e) => A(b.wM, e) }), e.audioSpaceId))
                            .catch(() => {
                                d?.(), n && n({ text: $ });
                            })
                    );
                }),
                F = (0, r.cn)(null, (e, A, { isEnded: a, isKicked: n }) => {
                    const o = e(p.rm),
                        r = e(p.cI);
                    return A(G.Q), a && o ? l.default.push((0, _.e)(o), { forceRenderEnded: !0 }) : e(R.MG) && n && l.default.push(e(g.P)), o ? A(Z.Hs, { spaceUserRole: r, spaceId: o, wasKicked: n }) : Promise.resolve();
                }),
                W = (0, r.cn)(null, async (e, A, a) => {
                    const n = e(p.cI);
                    A(G.Q), await A(Z.pI), await A(k.Dn, a), await A(Z.Hs, { spaceUserRole: n, spaceId: a });
                });
            function X() {
                return (0, d.b9)(G.R);
            }
            const Y = (0, r.cn)(!1);
            function J() {
                return (0, d.Dv)(Y);
            }
            const z = (0, t.xu)((e) =>
                    (0, r.cn)(null, async (A, a) => {
                        a(R.fJ, !0), a(Y, !0);
                        const n = await A((0, R.Xk)(e));
                        return a(K, { conferenceId: e, broadcastId: n });
                    }),
                ),
                K = (0, r.cn)(null, async (e, A, { broadcastId: a, conferenceId: n }) => {
                    try {
                        return A(R.fJ, !0), A(Y, !0), e(P.p_) || (await e((0, j.tq)(a)), e(B.v) || (await A(E.yw))), A(U, a);
                    } catch (A) {
                        throw (e(P.Fn) && l.default.goBack(), A);
                    }
                }),
                U = (0, r.cn)(null, (e, A, a) => {
                    e(P.p_) || A(T.FF, a), A(R.fJ, !0), A(Y, !0);
                    const n = C.P_();
                    return e((0, j.tq)(a))
                        .then((n) => {
                            if (!n) return Error("failed to find space");
                            if (n.disallow_join) return Error("cannot join space");
                            if (!n.media_key) return Error("failed to find space key");
                            const o = n.media_key,
                                r = (n.is_space_available_for_replay && [c.default.SpaceState.Ended, c.default.SpaceState.TimedOut].includes(n.state)) ?? !1,
                                d = n.narrow_cast_space_type === c.default.AudienceEnum.superFollowersOnly,
                                t = (0, y._h)(e(h.qc).getState()),
                                s = n.host?.user_id === t ? M.Q.host : M.Q.speaker;
                            return L({ contentType: n.content_type, id: a, isAnonymous: !1, isLive: n.state === c.default.SpaceState.Running, isReplay: r, isSuperFollowersOnly: d, mediaKey: o, origin: void 0, role: s, started_at: n?.started_at, clearAndLoadSpace: (e) => A(w.e, e), resetExpandedDockStore: (e) => A(b.wM, e) }), s === M.Q.host ? A(Ae, n.rest_id) : e(P.p_) ? A(Z.Sk, { spaceId: n.rest_id, role: s }) : A(ee, { spaceId: n.rest_id, role: s, shouldAutoJoin: !0 });
                        })
                        .then(
                            (e) => {
                                const A = n.end();
                                return C.IM("conferences:join:success", A), e;
                            },
                            (A) => {
                                const a = n.end();
                                C.IM("conferences:join:failure", a);
                                const { dispatch: o } = e(h.qc);
                                o((0, f.fz)({ text: "failed to connect to the conference" })), (0, v.Hj)(A);
                            },
                        )
                        .finally(() => A(Y, !1));
                });
            function V(e) {
                let A = "live_not_recording";
                return e?.is_space_available_for_replay && (A = e?.state === c.default.SpaceState.Running ? "live_recording" : "replay"), A;
            }
            function O(e) {
                let A;
                return e?.narrow_cast_space_type === c.default.AudienceEnum.superFollowersOnly ? (A = "super_followers") : e?.narrow_cast_space_type === c.default.AudienceEnum.employeesOnly ? (A = "employees") : e?.community && (A = "community"), A;
            }
            function L(e) {
                const { contentType: A, id: a, addToast: n, isAnonymous: o, isLive: r, isReplay: d, isSuperFollowersOnly: t, mediaKey: l, origin: c, scribe: i, started_at: u, role: m = M.Q.listener, clearAndLoadSpace: h, resetExpandedDockStore: p } = e;
                S.Z.proxsee
                    .login()
                    .then(() => {
                        l && (r || d) && (D.mc(), p({ contentType: (0, I.dW)(A), isReplay: d, isAnonymous: o, isSuperFollowersOnly: t, started_at: u }), d && i && i(":audiospace:replay:recording:play:click", { origin: c }), h({ id: a, isAnonymous: !!o, isLive: r, mediaKey: l, role: m }), i && i(":audiospace:event:join:listener:success", { origin: c }), c === s.Y.spacebar && i && i(":*:*:*:audiospace_fleet:join", { origin: c }));
                    })
                    .catch(() => {
                        n && n({ text: q });
                    });
            }
            const q = u().c60ed9b0,
                $ = u().d8227e16,
                ee = (0, r.cn)(null, async (e, A, a) => {
                    const { role: n, spaceId: o } = a,
                        r = await A(k.Yn, a),
                        { can_auto_join: d, session_uuid: t } = r;
                    return d && t
                        ? A(Z.$R, { spaceId: o, negotiate: !0, createRoom: !1 }).then(() => {
                              A(p.cI, n);
                          })
                        : A(k.K7, o);
                }),
                Ae = (0, r.cn)(null, async (e, A, a) => {
                    const n = e(k.F6),
                        r = await n.reconnectHost(a);
                    if (!r?.broadcast) return Promise.reject(new Error("Broadcast call did not return a broadcast!"));
                    const d = r.access_token;
                    A(k.re, ""), await e(k.yj).initialize(d);
                    const t = { roomID: r.room_id, streamName: r.stream_name, vidManToken: r.credential, janusURL: r.webrtc_gw_url, isAudioOnly: !0, isPrivate: !1, guestServicesSessionUuid: r.session_uuid };
                    A(Z.YX, t), await A(Z.$R, { spaceId: a, negotiate: !1, createRoom: !1 });
                    const s = e(Z.kw),
                        l = e(Z.Eg);
                    return o()(s, "Could not reconnect to space due to lack of publisherId"), n.publishBroadcast({ broadcast_id: a, webrtc_handle_id: l.config.handlerId, webrtc_session_id: l.config.janusSessionId, janus_publisher_id: s, janus_room_id: a });
                }),
                ae = (0, r.cn)(null, async (e, A, a) => {
                    const n = e(k.F6),
                        r = await n.prePublishScheduledAudioBroadcast(a),
                        d = await S.Z.audioSpace(a);
                    o()(d, "expected to get audio space metadata");
                    const t = d;
                    o()(r, "expected details");
                    const s = r,
                        l = s.access_token;
                    A(k.re, ""), await e(k.yj).initialize(l);
                    const c = { roomID: s.room_id, streamName: s.stream_name, vidManToken: s.credential, janusURL: s.webrtc_gw_url, isAudioOnly: !0, isPrivate: !1, guestServicesSessionUuid: "" };
                    A(Z.YX, c), await A(Z.$R, { spaceId: a, negotiate: !1, createRoom: !0 });
                    const i = e(Z.kw),
                        u = e(Z.Eg);
                    return o()(i, "Could not create space due to lack of publisherId"), await n.publishBroadcast({ broadcast_id: a, webrtc_handle_id: u.config.handlerId, webrtc_session_id: u.config.janusSessionId, janus_publisher_id: i, janus_room_id: a, status: s.broadcast.status, conversation_controls: t?.conversation_controls || 0 }), await A(k.TM, { broadcast_id: a, twitter_user_ids: [s.broadcast.twitter_id] }), { broadcast: s.broadcast, audioSpaceMetadata: t };
                }),
                ne = (0, r.cn)(null, (e, A, a) => {
                    e((0, j.tq)(a)).then((e) => {
                        if (!e || !e.media_key || e.disallow_join) return;
                        const n = e.media_key,
                            o = (e.is_space_available_for_replay && [c.default.SpaceState.Ended, c.default.SpaceState.TimedOut].includes(e.state)) ?? !1;
                        L({ contentType: e?.content_type, id: a, mediaKey: n, isLive: e.state === c.default.SpaceState.Running, isReplay: o, isAnonymous: !1, isSuperFollowersOnly: e.narrow_cast_space_type === c.default.AudienceEnum.superFollowersOnly, started_at: e?.started_at, origin: void 0, role: M.Q.listener, clearAndLoadSpace: (e) => A(w.e, e), resetExpandedDockStore: (e) => A(b.wM, e) });
                    });
                });
        },
        625555: (e, A, a) => {
            a.d(A, { Bl: () => y, Dn: () => Y, F6: () => z, FS: () => P, FX: () => f, H_: () => R, Ht: () => F, K7: () => b, N8: () => H, NG: () => S, Sd: () => k, TM: () => B, TU: () => x, Vp: () => g, X8: () => C, Yn: () => w, Yy: () => Q, ZN: () => W, bX: () => Z, cH: () => G, fP: () => X, hs: () => j, iq: () => v, oZ: () => _, rc: () => I, re: () => D, t9: () => J, w: () => N, wr: () => M, xB: () => E, yj: () => K });
            var n = a(614983),
                o = a.n(n),
                r = a(565058),
                d = a(741810),
                t = a(650556),
                s = a(304148),
                l = a(420182),
                c = a(42134),
                i = a(484633),
                u = a(390387),
                m = a(692822),
                h = a(536387),
                p = a(509599);
            const D = (0, h.Yh)(),
                M = (0, r.cn)((e) => {
                    if (e(c.lR) && e(D.isInit)) return e(D);
                }),
                w = (0, r.cn)(null, (e, A, a) => {
                    const { role: n, shouldAutoJoin: o, spaceId: r } = a;
                    return e((0, p.Go)(r)).then((e) =>
                        e.joinAsSpeaker(r, { join_as_admin: n === i.Q.cohost || n === i.Q.host, should_auto_join: o }).then((e) => {
                            const { can_auto_join: a, session_uuid: n } = e;
                            return a && n && A(D, n), e;
                        }),
                    );
                }),
                b = (0, r.cn)(null, (e, A, a) =>
                    e((0, p.Go)(a)).then((e) =>
                        e.submitSpeakerRequest(a).then((e) => {
                            A(D, e.session_uuid);
                        }),
                    ),
                ),
                y = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.negotiateStream(n));
                }),
                f = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.muteSpeaker(n, a));
                }),
                _ = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.unmuteSpeaker(n, a));
                }),
                g = (0, r.cn)(null, (e, A) => {
                    const a = e(c.rm);
                    if (!a) return Promise.resolve();
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.cancelSpeakerRequest(a, n));
                }),
                S = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.endStream({ session_uuid: n }));
                }),
                v = (0, r.cn)(null, (e, A) => {
                    const a = e(c.rm);
                    if (!a) return Promise.resolve();
                    const n = (0, u._h)(e(l.qc).getState());
                    return n ? A(I, a, n) : Promise.resolve();
                }),
                I = (0, r.cn)(null, (e, A, a, n) => {
                    const o = e(D);
                    return e((0, p.Go)(a)).then((e) => e.removeAdmin({ broadcast_id: a, twitter_user_id: n, session_uuid: o }));
                }),
                C = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.lowerHand({ session_uuid: n, broadcast_id: a }));
                }),
                E = "✋",
                k = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.raiseHand({ session_uuid: n, broadcast_id: a, emoji: E }));
                }),
                B = (0, r.cn)(null, (e, A, a) => e((0, p.Go)(a.broadcast_id)).then((e) => e.adminInvite(a))),
                R = (0, r.cn)(null, (e, A, a, n, o, r) => e((0, p.Go)(a)).then((e) => e.setSpaceSettings(a, n, o, r))),
                Z = (0, r.cn)(null, (e, A, a) => e((0, p.Go)(a)).then((e) => e.muteSpace(a))),
                G = (0, r.cn)(null, (e, A, a) => e((0, p.Go)(a)).then((e) => e.unmuteSpace(a))),
                x = (0, r.cn)(null, (e, A, a) => {
                    const n = e(D);
                    return e((0, p.Go)(a)).then((e) => e.cancelSpeakerRequest(a, n));
                }),
                T = (0, r.cn)((e) => {
                    const A = e(c.rm);
                    return A ? e((0, p.Go)(A)) : Promise.resolve(e(K));
                }),
                P = (0, r.cn)(null, (e, A, a) => {
                    const n = e(s.Cl).get(a);
                    return o()(n, "expected session"), e(T).then((e) => e.approveRequest(n.session_uuid));
                }),
                j = (0, r.cn)(null, (e, A, a) => {
                    const n = e(s.Cl).get(a);
                    return o()(n, "expected session"), e(T).then((e) => e.rejectRequest(n.session_uuid));
                }),
                Q = (0, r.cn)(null, (e, A, a, n, o) => {
                    const r = JSON.stringify({ guestBroadcastingEvent: m._M.InviteViewersToCallIn });
                    return e((0, p.Go)(a)).then((e) => (e.sendPrivateMessage(r, m.gK.HydraControlMessage, o, a), e.inviteToSpeak(n, a)));
                }),
                N = (0, r.cn)(null, (e, A, a, n) => e((0, p.Go)(a)).then((e) => e.addAdmin({ broadcast_id: a, twitter_user_id: n }))),
                H = (0, r.cn)(null, (e, A, a, n) => {
                    const r = e(s.Cl).get(n);
                    return o()(r, "expected session"), e((0, p.Go)(a)).then((e) => e.muteSpeaker(r.session_uuid, a));
                }),
                F = (0, r.cn)(null, (e, A, a, n) => e((0, p.Go)(a)).then((e) => e.muteSpeaker(n, a))),
                W = (0, r.cn)(null, (e, A, a, n) => e((0, p.Go)(a)).then((e) => e.removeParticipants([n], a))),
                X = (0, r.cn)(null, (e, A, a) => {
                    const { handlerId: n, janusSessionId: r, janusTargetId: d, periscopeUserId: t, spaceId: l } = a,
                        c = e(s.Cl).get(t);
                    return o()(c, "expected session"), e((0, p.Go)(l)).then((e) => e.streamEject({ session_uuid: c.session_uuid, webrtc_handle_id: n, webrtc_session_id: r, janus_room_id: l, janus_participant_id: d }));
                }),
                Y = (0, r.cn)(null, (e, A, a) => e((0, p.Go)(a)).then((e) => e.endAudioSpace(a))),
                J = (0, r.cn)((e) => e(z).periscopeUserId()),
                z = (0, r.cn)((e) => d.E),
                K = (0, r.cn)((e) => t.VI);
        },
        136397: (e, A, a) => {
            a.d(A, { D0: () => T, TP: () => W, ZJ: () => B, _j: () => j });
            var n = a(202784),
                o = a(400752),
                r = a(565058),
                d = a(325686),
                t = a(844685),
                s = a(154003),
                l = a(392237),
                c = a(674132),
                i = a.n(c),
                u = a(370751),
                m = a(516951),
                h = a(741810),
                p = a(614646),
                D = a(420182),
                M = a(142202),
                w = a(736063),
                b = a(125363),
                y = a(601576),
                f = a(114084),
                _ = a(692822),
                g = a(526250),
                S = a(582129),
                v = a(625555),
                I = a(4427),
                C = a(302217),
                E = a(847982),
                k = a(509599);
            function B() {
                const e = (0, o.b9)(Z),
                    A = (0, o.oR)();
                n.useEffect(() => {
                    const a = M.Z.subscribe(A, _.gK.ConferenceJoinRequest, e);
                    return () => {
                        a();
                    };
                }, [e, A]);
                const a = (0, o.b9)(R);
                n.useEffect(() => () => a([]), [a]), (0, g.N)(J);
            }
            const R = (0, r.cn)([]),
                Z = (0, r.cn)(null, (e, A, a) => {
                    for (const n of a) {
                        const a = e(C.Zd);
                        a.log({ message: "askToJoin received", chatMessage: JSON.stringify(n) });
                        const o = n.data.sender;
                        if (!o) continue;
                        const { display_name: r, twitter_id: d, username: t } = o;
                        if (!t || !r || !d) continue;
                        if (e(R).includes(d)) continue;
                        A(R, (e) => e.concat(d));
                        const { dispatch: s } = e(D.qc),
                            l = x({ displayName: r, username: t });
                        a.log(`adding toast: ${d}`),
                            s(
                                (0, y.fz)({
                                    text: l,
                                    action: {
                                        label: "Allow",
                                        onAction: () => {
                                            A(G, d);
                                        },
                                    },
                                    autoDismissDelay: 3e4,
                                    withClearButton: !0,
                                }),
                            );
                    }
                    return { clearHeapForMessageType: !0 };
                }),
                G = (0, r.cn)(null, (e, A, a) => {
                    const n = e(I.sB);
                    if (!n) return;
                    const o = e(v.F6);
                    o.getConference(n)
                        .then(({ attendees_twitter_user_ids: e }) => o.updateConference({ key: n, attendees_twitter_user_ids: e.concat(a) }))
                        .then(() => A(k.jQ));
                });
            function x({ displayName: e, username: A }) {
                return `${e} · @${A} would like to join the conference`;
            }
            function T() {
                const e = (0, o.oR)(),
                    A = (0, b.v9)(y.BZ),
                    a = (0, b.I0)();
                n.useEffect(() => {
                    if (!A.length) return;
                    const n = e.sub(k.RS, () => {
                        const n = e.get(k.RS),
                            o = (0, u.Z)(n.map(({ guest_display_name: e, guest_username: A }) => x({ displayName: e, username: A }))),
                            r = A.filter(({ text: e }) => "string" == typeof e && o.has(e));
                        r.length && a((0, y.VU)(r.map(({ id: e }) => e)));
                    });
                    return () => n();
                }, [a, e, A]);
            }
            const P = (0, r.cn)(
                null,
                (e, A, a, n) =>
                    new Promise((o, r) => {
                        l();
                        const d = setInterval(l, 5e3),
                            t = () => {
                                clearInterval(d), clearTimeout(s);
                            },
                            s = setTimeout(t, 3e4);
                        function l() {
                            h.E.joinConference(a, { requestToJoin: !0 }).then(
                                () => {
                                    A(I.oK, a).then((e) => {
                                        A(S.HQ, e), t(), o();
                                    });
                                },
                                (A) => {
                                    if (A instanceof p.$) {
                                        if (403 === A.status) return;
                                        if (412 === A.status) {
                                            const { dispatch: A } = e(D.qc),
                                                a = "No one is in the room to let you in";
                                            A((0, y.fz)({ text: a })), t(), o();
                                        }
                                    }
                                    t(), r(A);
                                },
                            );
                        }
                        n.addEventListener("abort", t, { once: !0 });
                    }),
            );
            function j() {
                const [e] = n.useState(() => new AbortController());
                n.useEffect(
                    () => () => {
                        e.abort();
                    },
                    [e],
                );
                const A = (0, o.b9)(P),
                    a = (0, o.Dv)(I.sB),
                    r = (0, o.b9)(Q);
                return (
                    (0, o.Dv)(Q),
                    n.useCallback(() => {
                        a && r(A(a, e.signal));
                    }, [e.signal, A, a, r])
                );
            }
            const Q = (0, r.cn)(),
                N = i().c3b5b829,
                H = "Requested to Join",
                F = i().i22835de;
            function W() {
                const e = (0, o.Dv)(R);
                return e.length
                    ? n.createElement(
                          d.Z,
                          null,
                          n.createElement(t.Z, { subtext: N({ count: e.length }), text: H }),
                          e.map((e) => n.createElement(w.H, { errorConfig: X }, n.createElement(Y, { userId: e }))),
                      )
                    : null;
            }
            const X = { context: "CONFERENCE_ASK_TO_JOIN" };
            function Y({ userId: e }) {
                const A = (0, E.$)(e),
                    a = (0, o.b9)(G),
                    r = n.useCallback(() => {
                        a(e);
                    }, [a, e]);
                return A ? n.createElement(d.Z, { style: z.prospectiveSpeakerUserRow }, n.createElement(f.H, { displayMode: "UserCompact", style: z.userCell, user: A, withLink: !1 }), n.createElement(d.Z, { style: z.prospectiveSpeakerUserRowButtonsContainer }, n.createElement(s.ZP, { onPress: r, size: "small", style: z.prospectiveSpeakerUserRowButton }, F))) : null;
            }
            const J = (0, g.v)((e, A) => {
                    const a = e(R);
                    if (!a.length) return m.Z;
                    const n = e(k.F$),
                        o = new Set(e(k.Xn)),
                        r = a.filter((e) => !n.has(e) && !o.has(e));
                    return r.length !== a.length && A(R, r), m.Z;
                }),
                z = l.default.create((e) => ({ userCell: { flex: 1 }, prospectiveSpeakerUserRow: { width: "100%", justifyContent: "center" }, prospectiveSpeakerUserRowButtonsContainer: { flexDirection: "row", gap: e.spaces.space16, marginStart: e.spaces.space16, marginEnd: e.spaces.space16, justifyContent: "center" }, prospectiveSpeakerUserRowButton: { flex: 1 } }));
        },
        405070: (e, A, a) => {
            a.d(A, { U: () => t });
            var n = a(565058),
                o = a(25252),
                r = a(536387);
            const d =
                    "data:video/mp4;base64,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",
                t = (0, n.cn)((e) => {
                    if (e(o.Y)) return e(s), e(s.resolved);
                }),
                s = (0, r.K9)(() =>
                    (function () {
                        const e = document.createElement("video");
                        if (!("captureStream" in e)) return;
                        return (
                            (e.autoplay = !0),
                            (e.loop = !0),
                            (e.muted = !0),
                            (e.src = d),
                            e.play(),
                            new Promise((A) => {
                                const a = e.captureStream();
                                e.onloadedmetadata = () => {
                                    A(a.getVideoTracks()[0]), (e.onloadedmetadata = void 0);
                                };
                            })
                        );
                    })(),
                );
        },
        94751: (e, A, a) => {
            a.d(A, { Fz: () => w, Pm: () => h, U9: () => D, _$: () => y, ce: () => M, qw: () => m });
            var n = a(565058),
                o = a(516951),
                r = a(420182),
                d = a(142202),
                t = a(23425),
                s = a(692822),
                l = a(526250),
                c = a(811322),
                i = a(396636),
                u = a(65178);
            const m = (0, n.cn)([]),
                h = (0, n.cn)(""),
                p =
                    ((0, u.g)(),
                    (0, i.Q)(
                        () => m,
                        (e, A, a) => {
                            if (e(r.zE).get(t.xK)) return A(D, []), o.Z;
                            A(w, !0), A(D, (e) => [...e, a]);
                            let n = setTimeout(() => {
                                A(M(a), !0),
                                    (n = setTimeout(() => {
                                        A(D, (e) => e.filter((e) => e !== a));
                                    }, 500));
                            }, 5e3);
                            return () => clearTimeout(n);
                        },
                    )),
                D = (0, n.cn)([]),
                M = (0, c.X)(() => (0, n.cn)(!1)),
                w = (0, n.cn)(!1),
                b = (0, l.v)((e, A) => (e(t.xK) && (A(w, !1), A(D, [])), o.Z)),
                y = (0, n.cn)(null, (e, A) => {
                    const a = e(r.zE),
                        n = d.Z.subscribe(
                            a,
                            s.gK.Chat,
                            (e) => (
                                e.forEach((e) => {
                                    const a = e.body.uuid,
                                        n = e.body.body,
                                        o = e.data.sender?.twitter_id;
                                    if (!n || !o || !a) return;
                                    const r = { id: a, text: n, timeSent: e.data.timestamp ? e.data.timestamp / 1e6 : 0, userId: o };
                                    A(m, (e) => [...e, r]);
                                }),
                                { clearHeapForMessageType: !0 }
                            ),
                        ),
                        o = A(p),
                        t = A(b);
                    return () => {
                        n(), o(), t(), A(f);
                    };
                }),
                f = (0, n.cn)(null, (e, A) => {
                    A(m, []), A(D, []), A(h, "");
                });
        },
        41931: (e, A, a) => {
            a.d(A, { S: () => d, v: () => t });
            var n = a(565058),
                o = a(856642),
                r = a(4427);
            const d = (0, n.cn)(!1),
                t = (0, n.cn)((e) => e(r.MG) && (s || e(d))),
                s = "1" === (0, o.parse)(window.location.search.substr(1)).companion;
        },
        176559: (e, A, a) => {
            a.d(A, { V: () => l, Z: () => u });
            var n = a(565058),
                o = a(516951),
                r = a(420182),
                d = a(526250),
                t = a(934871),
                s = a(251836);
            const l = (0, d.v)((e, A) => {
                    if (!e(r.f0).isTrue("rweb_conf_composite_video_enabled")) return o.Z;
                    const a = e(s.mb),
                        n = e(t.nq);
                    if (a && n) {
                        const e = new MediaStream();
                        e.addTrack(a);
                        const o = new MediaStream();
                        o.addTrack(n);
                        let r = !1;
                        return (
                            A(c, e, o).then((e) => {
                                r ? e() : (r = e);
                            }),
                            () => {
                                "function" == typeof r ? r() : (r = !0);
                            }
                        );
                    }
                    return o.Z;
                }),
                c = (0, n.cn)(null, async (e, A, a, n) => {
                    const o = document.createElement("video"),
                        r = document.createElement("video");
                    (o.muted = r.muted = !0), (o.srcObject = a), (r.srcObject = n), await Promise.all([o.play(), r.play()]);
                    const d = document.createElement("canvas");
                    let t = (d.width = o.videoWidth),
                        s = (d.height = o.videoHeight);
                    const l = d.getContext("2d");
                    o.onresize = (e) => {
                        (t = d.width = o.videoWidth), (s = d.height = o.videoHeight);
                    };
                    const c = await d.captureStream();
                    let u;
                    return (
                        A(i, c),
                        (function e() {
                            l.drawImage(o, 0, 0);
                            const A = r.videoWidth,
                                a = r.videoHeight,
                                n = s / 3,
                                d = n * (A / a);
                            l.save();
                            const c = Math.min(A, a),
                                i = c / 2,
                                m = Math.min(n, d),
                                h = m / 2;
                            (function (e, A) {
                                const { radius: a, x: n, y: o } = A;
                                e.beginPath(), e.arc(n, o, a, 0, 2 * Math.PI), e.closePath(), e.clip();
                            })(l, { radius: h, x: t - h, y: 0 + h }),
                                l.translate(t, 0),
                                l.scale(-1, 1);
                            const p = A / 2 - i,
                                D = a / 2 - i;
                            l.drawImage(r, p, D, c, c, 0, 0, m, m), l.restore(), (u = requestAnimationFrame(e));
                        })(),
                        () => {
                            e(i) === c && A(i, void 0), void 0 !== u && cancelAnimationFrame(u);
                        }
                    );
                });
            const i = (0, n.cn)(),
                u = (0, n.cn)((e) => e(i)?.getVideoTracks()[0]);
        },
    },
]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.AudioDock~loader.DashMenu~loader.DashModal~loader.DMDrawer~ondemand.InlinePlayer~ondem-647e57f3.f896d75a.js.map
